<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuildaMusicGrid - Login</title>
    <link rel="stylesheet" href="/css/gb-spotifyLogin.css">
    <link rel="icon" 
          type="image/png" 
          href="/img/favicon.png">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-logo">
                <img src="/img/musicgrid-logo.png" alt="MusicGrid Logo" class="header-logo">
                MusicGrid
            </div>
            <div class="hamburger-menu">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#play">Play</a></li>
                <li><a href="#leaderboard">Leaderboard</a></li>
                <li><a href="#settings">Settings</a></li>
            </ul>
        </nav>
        <div class="mobile-nav">
            <ul class="mobile-nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#play">Play</a></li>
                <li><a href="#leaderboard">Leaderboard</a></li>
                <li><a href="#settings">Settings</a></li>
            </ul>
        </div>
    </header>
    <main>
        <section class="hero">
          <div class="overlay"></div>
          <div class="spotify-content">
            <div id="main"></div>
            <div id="oauth"></div>
          
            <template id="login">
              <div class="hero-content">
                <h1>A Grid of Your Own</h1>
                <p>Authorize Spotify access below to build your custom grid, which will use your top artists and randomly selected categories.</p>
              </div>
              <br>
              <button id="login-button" data-bind-onclick="loginWithSpotifyClick();"> Log in with Spotify </button>
            </template>
          
            <template id="logged-in-template">
              <div class="hero-content">
                <h1>Spotify login complete - proceed to <a href="/grid-builder/step2">Step 2</a> to Build Your Grid!</h1>
                <br>
                <h1>Logged in as <span data-bind="display_name"></span></h1>
                <img width="150" data-bind-src="images[0].url" data-bind-alt="display_name" />
                <table>
                  <tr>
                    <td>Display name</td>
                    <td data-bind="display_name"></td>
                  </tr>
                  <tr>
                    <td>Id</td>
                    <td data-bind="id"></td>
                  </tr>
                  <tr>
                    <td>Email</td>
                    <td data-bind="email"></td>
                  </tr>
                  <tr>
                    <td>Spotify URI</td>
                    <td>
                      <a data-bind="external_urls.spotify" data-bind-href="external_urls.spotify"></a>
                    </td>
                  </tr>
                  <tr>
                    <td>Link </dt>
                    <td>
                      <a data-bind="href" data-bind-href="href"></a>
                    </td>
                  </tr>
                  <tr>
                    <td>Profile Image</td>
                    <td>
                      <a data-bind-href="images[0].url" data-bind="images[0].url"></a>
                    </td>
                  </tr>
                  <tr>
                    <td>Country</td>
                    <td data-bind="country"></td>
                  </tr>
                </table>
            
                <button id="refresh-token-button" data-bind-onclick="refreshTokenClick();">Refresh Token</button>
                <button id="logout-button" data-bind-onclick="logoutClick();">Log out</button>
              </div>
            </template>
          
            <template id="oauth-template">
              <h2>oAuth info</h2>
              <table>
                <tr>
                  <td>Access token</td>
                  <td data-bind="access_token"></td>
                </tr>
                <tr>
                  <td>Refresh token</td>
                  <td data-bind="refresh_token"></td>
                </tr>
                <tr>
                  <td>Expiration at</td>
                  <td data-bind="expires">${getExpirationDate(expires_in)}</td>
                </tr>
              </table>
            </template>
              
          <div class="hero-content">
            <br>
            <p>Access tokens are handled with Spotify OAUTH KPIC best practice. Scope of permissions shared will be limited to your top artists in recent weeks/months/years.</p>
          </div>
          </div>
            
        </section>
    </main>
    <footer class="footer">
        <p>&copy; 2024 MusicGrid</p>
    </footer>
  <script src="/js/gb-spotifyLogin.js" type="module"></script>
</body>
</html>
